{"ast":null,"code":"import React,{useEffect}from'react';import toast,{Toaster}from'react-hot-toast';import{useFormik}from'formik';import{resetPasswordValidation}from'../helper/validate';import{resetPassword}from'../helper/helper';import{useAuthStore}from'../store/store';import{useNavigate,Navigate}from'react-router-dom';import useFetch from'../hooks/fetch.hook';import styles from'../styles/UserName.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Reset(){const{username}=useAuthStore(state=>state.auth);const navigate=useNavigate();const[{isLoading,apiData,status,serverError}]=useFetch('createResetSession');// useEffect(() =>{\n//      console.log(apiData)\n// })\nconst formik=useFormik({initialValues:{password:'',confirm_pwd:''},validate:resetPasswordValidation,validateOnBlur:false,validateOnChange:false,onSubmit:async values=>{// console.log(values)\nlet resetPromise=resetPassword({username,password:values.password});toast.promise(resetPromise,{loading:'Обновление',success:/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u0431\\u0440\\u043E\\u0441 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F \\u0443\\u0441\\u043F\\u0435\\u0448\\u0435\\u043D\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"\\u043D\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u043E\\u0441\\u044C \\u0441\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})});resetPromise.then(function(){navigate('/password');});}});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.massage});if(status&&status!==201)return/*#__PURE__*/_jsx(Navigate,{to:'/password'});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,style:{width:\"50%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-5xl fotn-bold\",children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C.\"})]}),/*#__PURE__*/_jsx(\"form\",{className:\"pt-20\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input text-center\",children:[/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps('password'),className:styles.textbox,type:\"text\",placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps('confirm_pwd'),className:styles.textbox,type:\"text\",placeholder:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"})]})})]})})]});}","map":{"version":3,"names":["React","useEffect","toast","Toaster","useFormik","resetPasswordValidation","resetPassword","useAuthStore","useNavigate","Navigate","useFetch","styles","jsx","_jsx","jsxs","_jsxs","Reset","username","state","auth","navigate","isLoading","apiData","status","serverError","formik","initialValues","password","confirm_pwd","validate","validateOnBlur","validateOnChange","onSubmit","values","resetPromise","promise","loading","success","children","error","then","className","massage","to","position","reverseOrder","glass","style","width","handleSubmit","getFieldProps","textbox","type","placeholder","btn"],"sources":["C:/Users/Porhc/OneDrive/Рабочий стол/oil/client/src/components/Reset.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useFormik } from 'formik';\r\nimport{ resetPasswordValidation } from '../helper/validate';\r\nimport { resetPassword } from '../helper/helper';\r\nimport { useAuthStore } from '../store/store';\r\nimport { useNavigate, Navigate } from 'react-router-dom';\r\nimport useFetch from '../hooks/fetch.hook'\r\n\r\nimport styles from '../styles/UserName.module.css';\r\n\r\n\r\nexport default function Reset() {\r\n\r\n    const { username } = useAuthStore(state => state.auth);\r\n    const navigate = useNavigate();\r\n    const [{isLoading, apiData, status, serverError }] = useFetch('createResetSession')\r\n\r\n    // useEffect(() =>{\r\n    //      console.log(apiData)\r\n    // })\r\n\r\n    const formik = useFormik({\r\n        initialValues : {\r\n          password : '',\r\n          confirm_pwd:''\r\n        },\r\n        validate : resetPasswordValidation,\r\n        validateOnBlur: false,\r\n        validateOnChange: false,\r\n        onSubmit : async values => {\r\n            // console.log(values)\r\n\r\n            let resetPromise = resetPassword({ username, password: values.password })\r\n\r\n            toast.promise(resetPromise, {\r\n                loading: 'Обновление',\r\n                success: <b>Сброс пароля успешен</b>,\r\n                error: <b>не получилось сбросить пароль</b>\r\n            });\r\n\r\n            resetPromise.then(function(){ navigate('/password')})\r\n\r\n        }\r\n    })\r\n\r\n    \r\n    if(isLoading) return <h1 className='text-2xl font-bold'>isLoading</h1>;\r\n    if(serverError) return <h1 className='text-xl text-red-500'>{serverError.massage}</h1>\r\n    if(status && status !== 201) return <Navigate to={'/password'}></Navigate>\r\n\r\n    return (\r\n        <div className=\"container mx-auto\">\r\n\r\n            <Toaster position='top-center' reverseOrder={false}></Toaster>\r\n\r\n            <div className='flex justify-center items-center h-screen'>\r\n                <div className={styles.glass} style={{ width : \"50%\"}}>\r\n                    <div className=\"title flex flex-col items-center\">\r\n                        <h4 className='text-5xl fotn-bold'>Восстановление пароля</h4>\r\n                        <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\r\n                            Введите новый пароль.\r\n                        </span>\r\n                    </div>\r\n\r\n                    <form className='pt-20' onSubmit={formik.handleSubmit}>\r\n\r\n\r\n                <div className=\"textbox flex flex-col items-center gap-6\">\r\n\r\n                    <div className=\"input text-center\">\r\n                  <input {...formik.getFieldProps('password')} className={styles.textbox} type=\"text\" placeholder='Новый пароль' />\r\n                  <input {...formik.getFieldProps('confirm_pwd')} className={styles.textbox} type=\"text\" placeholder='Повторите пароль' />\r\n                  </div>\r\n\r\n                  <button className={styles.btn} type='submit'>Восстановить</button>\r\n              </div>\r\n\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}