{"ast":null,"code":"import _objectSpread from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import toast,{Toaster}from'react-hot-toast';import{useFormik}from'formik';import{resetPasswordValidation}from'../helper/validate';import{resetPassword}from'../helper/helper';import{useAuthStore}from'../store/store';import{useNavigate,Navigate}from'react-router-dom';import useFetch from'../hooks/fetch.hook';import styles from'../styles/UserName.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Reset(){var _useAuthStore=useAuthStore(function(state){return state.auth;}),username=_useAuthStore.username;var navigate=useNavigate();var _useFetch=useFetch('createResetSession'),_useFetch2=_slicedToArray(_useFetch,1),_useFetch2$=_useFetch2[0],isLoading=_useFetch2$.isLoading,apiData=_useFetch2$.apiData,status=_useFetch2$.status,serverError=_useFetch2$.serverError;// useEffect(() =>{\n//      console.log(apiData)\n// })\nvar formik=useFormik({initialValues:{password:'',confirm_pwd:''},validate:resetPasswordValidation,validateOnBlur:false,validateOnChange:false,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var resetPromise;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// console.log(values)\nresetPromise=resetPassword({username:username,password:values.password});toast.promise(resetPromise,{loading:'Обновление',success:/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u0431\\u0440\\u043E\\u0441 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F \\u0443\\u0441\\u043F\\u0435\\u0448\\u0435\\u043D\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"\\u043D\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u043E\\u0441\\u044C \\u0441\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})});resetPromise.then(function(){navigate('/password');});case 3:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.massage});if(status&&status!==201)return/*#__PURE__*/_jsx(Navigate,{to:'/password'});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,style:{width:\"50%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-5xl fotn-bold\",children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C.\"})]}),/*#__PURE__*/_jsx(\"form\",{className:\"pt-20\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input text-center\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},formik.getFieldProps('password')),{},{className:styles.textbox,type:\"text\",placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},formik.getFieldProps('confirm_pwd')),{},{className:styles.textbox,type:\"text\",placeholder:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}))]}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"})]})})]})})]});}","map":{"version":3,"names":["React","useEffect","toast","Toaster","useFormik","resetPasswordValidation","resetPassword","useAuthStore","useNavigate","Navigate","useFetch","styles","Reset","state","auth","username","navigate","isLoading","apiData","status","serverError","formik","initialValues","password","confirm_pwd","validate","validateOnBlur","validateOnChange","onSubmit","values","resetPromise","promise","loading","success","error","then","massage","glass","width","handleSubmit","getFieldProps","textbox","btn"],"sources":["C:/Users/Porhc/OneDrive/Рабочий стол/oil/client/src/components/Reset.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { useFormik } from 'formik';\nimport{ resetPasswordValidation } from '../helper/validate';\nimport { resetPassword } from '../helper/helper';\nimport { useAuthStore } from '../store/store';\nimport { useNavigate, Navigate } from 'react-router-dom';\nimport useFetch from '../hooks/fetch.hook'\n\nimport styles from '../styles/UserName.module.css';\n\n\nexport default function Reset() {\n\n    const { username } = useAuthStore(state => state.auth);\n    const navigate = useNavigate();\n    const [{isLoading, apiData, status, serverError }] = useFetch('createResetSession')\n\n    // useEffect(() =>{\n    //      console.log(apiData)\n    // })\n\n    const formik = useFormik({\n        initialValues : {\n          password : '',\n          confirm_pwd:''\n        },\n        validate : resetPasswordValidation,\n        validateOnBlur: false,\n        validateOnChange: false,\n        onSubmit : async values => {\n            // console.log(values)\n\n            let resetPromise = resetPassword({ username, password: values.password })\n\n            toast.promise(resetPromise, {\n                loading: 'Обновление',\n                success: <b>Сброс пароля успешен</b>,\n                error: <b>не получилось сбросить пароль</b>\n            });\n\n            resetPromise.then(function(){ navigate('/password')})\n\n        }\n    })\n\n    \n    if(isLoading) return <h1 className='text-2xl font-bold'>isLoading</h1>;\n    if(serverError) return <h1 className='text-xl text-red-500'>{serverError.massage}</h1>\n    if(status && status !== 201) return <Navigate to={'/password'}></Navigate>\n\n    return (\n        <div className=\"container mx-auto\">\n\n            <Toaster position='top-center' reverseOrder={false}></Toaster>\n\n            <div className='flex justify-center items-center h-screen'>\n                <div className={styles.glass} style={{ width : \"50%\"}}>\n                    <div className=\"title flex flex-col items-center\">\n                        <h4 className='text-5xl fotn-bold'>Восстановление пароля</h4>\n                        <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\n                            Введите новый пароль.\n                        </span>\n                    </div>\n\n                    <form className='pt-20' onSubmit={formik.handleSubmit}>\n\n\n                <div className=\"textbox flex flex-col items-center gap-6\">\n\n                    <div className=\"input text-center\">\n                  <input {...formik.getFieldProps('password')} className={styles.textbox} type=\"text\" placeholder='Новый пароль' />\n                  <input {...formik.getFieldProps('confirm_pwd')} className={styles.textbox} type=\"text\" placeholder='Повторите пароль' />\n                  </div>\n\n                  <button className={styles.btn} type='submit'>Восстановить</button>\n              </div>\n\n                    </form>\n\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}