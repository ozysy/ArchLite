{"ast":null,"code":"import React from'react';import{Link,useNavigate}from'react-router-dom';import avatar from'../assets/User.png';import toast,{Toaster}from'react-hot-toast';import{useFormik}from'formik';import{passwordValidate}from'../helper/validate';import useFetch from'../hooks/fetch.hook';import{useAuthStore}from'../store/store';import{verifyPassword}from'../helper/helper';import styles from'../styles/UserName.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Password(){const navigate=useNavigate();const{username}=useAuthStore(state=>state.auth);const[{isLoading,apiData,serverError}]=useFetch(\"/user/\".concat(username));const formik=useFormik({initialValues:{password:'admin@123'},validate:passwordValidate,validateOnBlur:false,validateOnChange:false,onSubmit:async values=>{// console.log(values)\nlet loginPromise=verifyPassword({username,password:values.password});toast.promise(loginPromise,{loading:'Проверка',success:/*#__PURE__*/_jsx(\"b\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\\u044F \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u0430\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u0438\\u0442\"})});loginPromise.then(res=>{let{token}=res.data;localStorage.setItem('token',token);navigate('/profile');});}});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.massage});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-5xl fotn-bold\",children:[\"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435 \",(apiData===null||apiData===void 0?void 0:apiData.fisrstName)||(apiData===null||apiData===void 0?void 0:apiData.username)]}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"\\u0423\\u0437\\u043D\\u0430\\u0439\\u0442\\u0435 \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435, \\u0441\\u0432\\u044F\\u0437\\u0430\\u0432\\u0448\\u0438\\u0441\\u044C \\u0441 \\u043D\\u0430\\u043C\\u0438.\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"py-1\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile flex justify-center py-4\",children:/*#__PURE__*/_jsx(\"img\",{src:(apiData===null||apiData===void 0?void 0:apiData.profile)||avatar,className:styles.profile_img,alt:\"avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps('password'),className:styles.textbox,type:\"text\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C? \",/*#__PURE__*/_jsx(Link,{className:\"text-red-500\",to:\"/recovery\",children:\"\\u0432\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})})]})]})})]});}","map":{"version":3,"names":["React","Link","useNavigate","avatar","toast","Toaster","useFormik","passwordValidate","useFetch","useAuthStore","verifyPassword","styles","jsx","_jsx","jsxs","_jsxs","Password","navigate","username","state","auth","isLoading","apiData","serverError","concat","formik","initialValues","password","validate","validateOnBlur","validateOnChange","onSubmit","values","loginPromise","promise","loading","success","children","error","then","res","token","data","localStorage","setItem","className","massage","position","reverseOrder","glass","fisrstName","handleSubmit","src","profile","profile_img","alt","getFieldProps","textbox","type","placeholder","btn","to"],"sources":["C:/Users/Porhc/OneDrive/Рабочий стол/oil/client/src/components/Password.js"],"sourcesContent":["import React from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport avatar from '../assets/User.png';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useFormik } from 'formik';\r\nimport { passwordValidate } from '../helper/validate'\r\nimport useFetch from '../hooks/fetch.hook';\r\nimport { useAuthStore } from '../store/store';\r\nimport { verifyPassword } from '../helper/helper';\r\n\r\n\r\nimport styles from '../styles/UserName.module.css';\r\n\r\n\r\nexport default function Password() {\r\n\r\n    const navigate = useNavigate()\r\n    const { username } = useAuthStore(state => state.auth)\r\n    const [{isLoading, apiData, serverError}] = useFetch(`/user/${username}`)\r\n\r\n    const formik = useFormik({\r\n        initialValues : {\r\n          password : 'admin@123'\r\n        },\r\n        validate : passwordValidate,\r\n        validateOnBlur: false,\r\n        validateOnChange: false,\r\n        onSubmit : async values => {\r\n            // console.log(values)\r\n            let loginPromise = verifyPassword({ username, password : values.password });\r\n            toast.promise(loginPromise, {\r\n                loading: 'Проверка',\r\n                success : <b>Авторизациия успешна</b>,\r\n                error : <b>Пароль не подходит</b>\r\n            })\r\n\r\n            loginPromise.then(res => {\r\n                let{ token } = res.data;\r\n                localStorage.setItem('token', token);\r\n                navigate('/profile')\r\n            })\r\n        }\r\n    })\r\n    \r\n\r\n    if(isLoading) return <h1 className='text-2xl font-bold'>isLoading</h1>;\r\n    if(serverError) return <h1 className='text-xl text-red-500'>{serverError.massage}</h1>\r\n\r\n    return (\r\n        <div className=\"container mx-auto\">\r\n\r\n            <Toaster position='top-center' reverseOrder={false}></Toaster>\r\n\r\n            <div className='flex justify-center items-center h-screen'>\r\n                <div className={styles.glass}>\r\n                    <div className=\"title flex flex-col items-center\">\r\n                        <h4 className='text-5xl fotn-bold'>Здравствуйте {apiData?.fisrstName || apiData?.username}</h4>\r\n                        <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\r\n                        Узнайте больше, связавшись с нами.\r\n                        </span>\r\n                    </div>\r\n\r\n                    <form className='py-1' onSubmit={formik.handleSubmit}>\r\n                        <div className='profile flex justify-center py-4'>\r\n                            <img src={apiData?.profile || avatar} className={styles.profile_img} alt=\"avatar\" />\r\n                        </div>\r\n\r\n                <div className=\"textbox flex flex-col items-center gap-6\">\r\n                  <input {...formik.getFieldProps('password')} className={styles.textbox} type=\"text\" placeholder='Пароль' />\r\n                  <button className={styles.btn} type='submit'>Войти</button>\r\n              </div>\r\n\r\n                           <div className=\"text-center py-4\">\r\n                            <span className='text-gray-500'>Забыли пароль? <Link className='text-red-500' to='/recovery'>восстановить пароль</Link></span>\r\n                           </div>\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}