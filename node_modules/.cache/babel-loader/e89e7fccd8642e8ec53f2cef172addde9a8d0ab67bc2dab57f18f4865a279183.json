{"ast":null,"code":"import _objectSpread from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Porhc/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/oil/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link,useNavigate}from'react-router-dom';import avatar from'../assets/User.png';import toast,{Toaster}from'react-hot-toast';import{useFormik}from'formik';import{passwordValidate}from'../helper/validate';import useFetch from'../hooks/fetch.hook';import{useAuthStore}from'../store/store';import{verifyPassword}from'../helper/helper';import styles from'../styles/UserName.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Password(){var navigate=useNavigate();var _useAuthStore=useAuthStore(function(state){return state.auth;}),username=_useAuthStore.username;var _useFetch=useFetch(\"/user/\".concat(username)),_useFetch2=_slicedToArray(_useFetch,1),_useFetch2$=_useFetch2[0],isLoading=_useFetch2$.isLoading,apiData=_useFetch2$.apiData,serverError=_useFetch2$.serverError;var formik=useFormik({initialValues:{password:'admin@123'},validate:passwordValidate,validateOnBlur:false,validateOnChange:false,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var loginPromise;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// console.log(values)\nloginPromise=verifyPassword({username:username,password:values.password});toast.promise(loginPromise,{loading:'Проверка',success:/*#__PURE__*/_jsx(\"b\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\\u044F \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u0430\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u0438\\u0442\"})});loginPromise.then(function(res){var token=res.data.token;localStorage.setItem('token',token);navigate('/profile');});case 3:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.massage});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-5xl fotn-bold\",children:[\"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435 \",(apiData===null||apiData===void 0?void 0:apiData.fisrstName)||(apiData===null||apiData===void 0?void 0:apiData.username)]}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"\\u0423\\u0437\\u043D\\u0430\\u0439\\u0442\\u0435 \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435, \\u0441\\u0432\\u044F\\u0437\\u0430\\u0432\\u0448\\u0438\\u0441\\u044C \\u0441 \\u043D\\u0430\\u043C\\u0438.\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"py-1\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile flex justify-center py-4\",children:/*#__PURE__*/_jsx(\"img\",{src:(apiData===null||apiData===void 0?void 0:apiData.profile)||avatar,className:styles.profile_img,alt:\"avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},formik.getFieldProps('password')),{},{className:styles.textbox,type:\"text\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"})),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C? \",/*#__PURE__*/_jsx(Link,{className:\"text-red-500\",to:\"/recovery\",children:\"\\u0432\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})})]})]})})]});}","map":{"version":3,"names":["React","Link","useNavigate","avatar","toast","Toaster","useFormik","passwordValidate","useFetch","useAuthStore","verifyPassword","styles","Password","navigate","state","auth","username","isLoading","apiData","serverError","formik","initialValues","password","validate","validateOnBlur","validateOnChange","onSubmit","values","loginPromise","promise","loading","success","error","then","res","token","data","localStorage","setItem","massage","glass","fisrstName","handleSubmit","profile","profile_img","getFieldProps","textbox","btn"],"sources":["C:/Users/Porhc/OneDrive/Рабочий стол/oil/client/src/components/Password.js"],"sourcesContent":["import React from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport avatar from '../assets/User.png';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useFormik } from 'formik';\r\nimport { passwordValidate } from '../helper/validate'\r\nimport useFetch from '../hooks/fetch.hook';\r\nimport { useAuthStore } from '../store/store';\r\nimport { verifyPassword } from '../helper/helper';\r\n\r\n\r\nimport styles from '../styles/UserName.module.css';\r\n\r\n\r\nexport default function Password() {\r\n\r\n    const navigate = useNavigate()\r\n    const { username } = useAuthStore(state => state.auth)\r\n    const [{isLoading, apiData, serverError}] = useFetch(`/user/${username}`)\r\n\r\n    const formik = useFormik({\r\n        initialValues : {\r\n          password : 'admin@123'\r\n        },\r\n        validate : passwordValidate,\r\n        validateOnBlur: false,\r\n        validateOnChange: false,\r\n        onSubmit : async values => {\r\n            // console.log(values)\r\n            let loginPromise = verifyPassword({ username, password : values.password });\r\n            toast.promise(loginPromise, {\r\n                loading: 'Проверка',\r\n                success : <b>Авторизациия успешна</b>,\r\n                error : <b>Пароль не подходит</b>\r\n            })\r\n\r\n            loginPromise.then(res => {\r\n                let{ token } = res.data;\r\n                localStorage.setItem('token', token);\r\n                navigate('/profile')\r\n            })\r\n        }\r\n    })\r\n    \r\n\r\n    if(isLoading) return <h1 className='text-2xl font-bold'>isLoading</h1>;\r\n    if(serverError) return <h1 className='text-xl text-red-500'>{serverError.massage}</h1>\r\n\r\n    return (\r\n        <div className=\"container mx-auto\">\r\n\r\n            <Toaster position='top-center' reverseOrder={false}></Toaster>\r\n\r\n            <div className='flex justify-center items-center h-screen'>\r\n                <div className={styles.glass}>\r\n                    <div className=\"title flex flex-col items-center\">\r\n                        <h4 className='text-5xl fotn-bold'>Здравствуйте {apiData?.fisrstName || apiData?.username}</h4>\r\n                        <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\r\n                        Узнайте больше, связавшись с нами.\r\n                        </span>\r\n                    </div>\r\n\r\n                    <form className='py-1' onSubmit={formik.handleSubmit}>\r\n                        <div className='profile flex justify-center py-4'>\r\n                            <img src={apiData?.profile || avatar} className={styles.profile_img} alt=\"avatar\" />\r\n                        </div>\r\n\r\n                <div className=\"textbox flex flex-col items-center gap-6\">\r\n                  <input {...formik.getFieldProps('password')} className={styles.textbox} type=\"text\" placeholder='Пароль' />\r\n                  <button className={styles.btn} type='submit'>Войти</button>\r\n              </div>\r\n\r\n                           <div className=\"text-center py-4\">\r\n                            <span className='text-gray-500'>Забыли пароль? <Link className='text-red-500' to='/recovery'>восстановить пароль</Link></span>\r\n                           </div>\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}